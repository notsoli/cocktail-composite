(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Mt=!1;var kt=Array.isArray,Kn=Array.prototype.indexOf,Ot=Array.from,Xn=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,Jn=Object.getOwnPropertyDescriptors,Zn=Object.prototype,Qn=Array.prototype,nn=Object.getPrototypeOf;function rn(e){for(var t=0;t<e.length;t++)e[t]()}const ee=2,an=4,ft=8,Nt=16,se=32,ze=64,tt=128,J=256,nt=512,G=1024,fe=2048,Le=4096,oe=8192,ct=16384,$n=32768,It=65536,er=1<<19,ln=1<<20,Ze=Symbol("$state"),tr=Symbol("");function un(e){return e===this.v}function nr(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function on(e){return!nr(e,this.v)}function rr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ir(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ar(e){throw new Error("https://svelte.dev/e/effect_orphan")}function lr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ur(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function or(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function sr(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function fr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let cr=!1;const At=1,Ct=2,sn=4,vr=8,dr=16,_r=1,pr=2,M=Symbol();function fn(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let q=null;function zt(e){q=e}function Z(e,t=!1,n){q={p:q,c:null,e:null,m:!1,s:e,x:null,l:null}}function Q(e){const t=q;if(t!==null){const l=t.e;if(l!==null){var n=P,r=I;t.e=null;try{for(var i=0;i<l.length;i++){var a=l[i];ye(a.effect),he(a.reaction),St(a.fn)}}finally{ye(n),he(r)}}q=t.p,t.m=!0}return{}}function cn(){return!0}function K(e,t){var n={f:0,v:e,reactions:null,equals:un,rv:0,wv:0};return n}function Ue(e){return hr(K(e))}function vn(e,t=!1){const n=K(e);return t||(n.equals=on),n}function hr(e){return I!==null&&!$&&(I.f&ee)!==0&&(ne===null?Cr([e]):ne.push(e)),e}function U(e,t){return I!==null&&!$&&cn()&&(I.f&(ee|Nt))!==0&&(ne===null||!ne.includes(e))&&fr(),bt(e,t)}function bt(e,t){return e.equals(t)||(e.v,e.v=t,e.wv=In(),dn(e,fe),P!==null&&(P.f&G)!==0&&(P.f&(se|ze))===0&&(le===null?Pr([e]):le.push(e))),t}function dn(e,t){var n=e.reactions;if(n!==null)for(var r=n.length,i=0;i<r;i++){var a=n[i],l=a.f;(l&fe)===0&&(re(a,t),(l&(G|J))!==0&&((l&ee)!==0?dn(a,Le):_t(a)))}}let yr=!1;function X(e,t=null,n){if(typeof e!="object"||e===null||Ze in e)return e;const r=nn(e);if(r!==Zn&&r!==Qn)return e;var i=new Map,a=kt(e),l=K(0);a&&i.set("length",K(e.length));var d;return new Proxy(e,{defineProperty(o,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&ur();var f=i.get(u);return f===void 0?(f=K(c.value),i.set(u,f)):U(f,X(c.value,d)),!0},deleteProperty(o,u){var c=i.get(u);if(c===void 0)u in o&&i.set(u,K(M));else{if(a&&typeof u=="string"){var f=i.get("length"),s=Number(u);Number.isInteger(s)&&s<f.v&&U(f,s)}U(c,M),Ht(l)}return!0},get(o,u,c){var _;if(u===Ze)return e;var f=i.get(u),s=u in o;if(f===void 0&&(!s||(_=Ve(o,u))!=null&&_.writable)&&(f=K(X(s?o[u]:M,d)),i.set(u,f)),f!==void 0){var v=p(f);return v===M?void 0:v}return Reflect.get(o,u,c)},getOwnPropertyDescriptor(o,u){var c=Reflect.getOwnPropertyDescriptor(o,u);if(c&&"value"in c){var f=i.get(u);f&&(c.value=p(f))}else if(c===void 0){var s=i.get(u),v=s==null?void 0:s.v;if(s!==void 0&&v!==M)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(o,u){var v;if(u===Ze)return!0;var c=i.get(u),f=c!==void 0&&c.v!==M||Reflect.has(o,u);if(c!==void 0||P!==null&&(!f||(v=Ve(o,u))!=null&&v.writable)){c===void 0&&(c=K(f?X(o[u],d):M),i.set(u,c));var s=p(c);if(s===M)return!1}return f},set(o,u,c,f){var A;var s=i.get(u),v=u in o;if(a&&u==="length")for(var _=c;_<s.v;_+=1){var y=i.get(_+"");y!==void 0?U(y,M):_ in o&&(y=K(M),i.set(_+"",y))}s===void 0?(!v||(A=Ve(o,u))!=null&&A.writable)&&(s=K(void 0),U(s,X(c,d)),i.set(u,s)):(v=s.v!==M,U(s,X(c,d)));var b=Reflect.getOwnPropertyDescriptor(o,u);if(b!=null&&b.set&&b.set.call(f,c),!v){if(a&&typeof u=="string"){var x=i.get("length"),T=Number(u);Number.isInteger(T)&&T>=x.v&&U(x,T+1)}Ht(l)}return!0},ownKeys(o){p(l);var u=Reflect.ownKeys(o).filter(s=>{var v=i.get(s);return v===void 0||v.v!==M});for(var[c,f]of i)f.v!==M&&!(c in o)&&u.push(c);return u},setPrototypeOf(){or()}})}function Ht(e,t=1){U(e,e.v+t)}var Wt,_n,pn,hn;function mr(){if(Wt===void 0){Wt=window,_n=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype;pn=Ve(t,"firstChild").get,hn=Ve(t,"nextSibling").get,e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__styles=null,e.__e=void 0,Text.prototype.__t=void 0}}function Pt(e=""){return document.createTextNode(e)}function Te(e){return pn.call(e)}function vt(e){return hn.call(e)}function N(e,t){return Te(e)}function Tt(e,t){{var n=Te(e);return n instanceof Comment&&n.data===""?vt(n):n}}function L(e,t=1,n=!1){let r=e;for(;t--;)r=vt(r);return r}function gr(e){e.textContent=""}function te(e){var t=ee|fe,n=I!==null&&(I.f&ee)!==0?I:null;return P===null||n!==null&&(n.f&J)!==0?t|=J:P.f|=ln,{ctx:q,deps:null,effects:null,equals:un,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??P}}function br(e){const t=te(e);return t.equals=on,t}function yn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)pe(t[n])}}function wr(e){for(var t=e.parent;t!==null;){if((t.f&ee)===0)return t;t=t.parent}return null}function Er(e){var t,n=P;ye(wr(e));try{yn(e),t=Cn(e)}finally{ye(n)}return t}function mn(e){var t=Er(e),n=(_e||(e.f&J)!==0)&&e.deps!==null?Le:G;re(e,n),e.equals(t)||(e.v=t,e.wv=In())}function xr(e){P===null&&I===null&&ar(),I!==null&&(I.f&J)!==0&&P===null&&ir(),Ft&&rr()}function kr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Re(e,t,n,r=!0){var i=(e&ze)!==0,a=P,l={ctx:q,deps:null,nodes_start:null,nodes_end:null,f:e|fe,first:null,fn:t,last:null,next:null,parent:i?null:a,prev:null,teardown:null,transitions:null,wv:0};if(n)try{Bt(l),l.f|=$n}catch(u){throw pe(l),u}else t!==null&&_t(l);var d=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(ln|tt))===0;if(!d&&!i&&r&&(a!==null&&kr(l,a),I!==null&&(I.f&ee)!==0)){var o=I;(o.effects??(o.effects=[])).push(l)}return l}function Or(e){const t=Re(ft,null,!1);return re(t,G),t.teardown=e,t}function me(e){xr();var t=P!==null&&(P.f&se)!==0&&q!==null&&!q.m;if(t){var n=q;(n.e??(n.e=[])).push({fn:e,effect:P,reaction:I})}else{var r=St(e);return r}}function Nr(e){const t=Re(ze,e,!0);return(n={})=>new Promise(r=>{n.outro?rt(t,()=>{pe(t),r(void 0)}):(pe(t),r(void 0))})}function St(e){return Re(an,e,!1)}function gn(e){return Re(ft,e,!0)}function z(e,t=[],n=te){const r=t.map(n);return Lt(()=>e(...r.map(p)))}function Lt(e,t=0){return Re(ft|Nt|t,e,!0)}function qe(e,t=!0){return Re(ft|se,e,!0,t)}function bn(e){var t=e.teardown;if(t!==null){const n=Ft,r=I;Kt(!0),he(null);try{t.call(null)}finally{Kt(n),he(r)}}}function wn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;pe(n,t),n=r}}function Ir(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&se)===0&&pe(t),t=n}}function pe(e,t=!0){var n=!1;if((t||(e.f&er)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,i=e.nodes_end;r!==null;){var a=r===i?null:vt(r);r.remove(),r=a}n=!0}wn(e,t&&!n),ot(e,0),re(e,ct);var l=e.transitions;if(l!==null)for(const o of l)o.stop();bn(e);var d=e.parent;d!==null&&d.first!==null&&En(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function En(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function rt(e,t){var n=[];Rt(e,n,!0),xn(n,()=>{pe(e),t&&t()})}function xn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var i of e)i.out(r)}else t()}function Rt(e,t,n){if((e.f&oe)===0){if(e.f^=oe,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var i=r.next,a=(r.f&It)!==0||(r.f&se)!==0;Rt(r,t,a?n:!1),r=i}}}function it(e){kn(e,!0)}function kn(e,t){if((e.f&oe)!==0){e.f^=oe,(e.f&G)===0&&(e.f^=G),He(e)&&(re(e,fe),_t(e));for(var n=e.first;n!==null;){var r=n.next,i=(n.f&It)!==0||(n.f&se)!==0;kn(n,i?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let Ge=[],wt=[];function On(){var e=Ge;Ge=[],rn(e)}function Ar(){var e=wt;wt=[],rn(e)}function Dt(e){Ge.length===0&&queueMicrotask(On),Ge.push(e)}function Yt(){Ge.length>0&&On(),wt.length>0&&Ar()}let Qe=!1,at=!1,lt=null,$e=!1,Ft=!1;function Kt(e){Ft=e}let je=[];let I=null,$=!1;function he(e){I=e}let P=null;function ye(e){P=e}let ne=null;function Cr(e){ne=e}let j=null,W=0,le=null;function Pr(e){le=e}let Nn=1,ut=0,_e=!1;function In(){return++Nn}function He(e){var f;var t=e.f;if((t&fe)!==0)return!0;if((t&Le)!==0){var n=e.deps,r=(t&J)!==0;if(n!==null){var i,a,l=(t&nt)!==0,d=r&&P!==null&&!_e,o=n.length;if(l||d){var u=e,c=u.parent;for(i=0;i<o;i++)a=n[i],(l||!((f=a==null?void 0:a.reactions)!=null&&f.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);l&&(u.f^=nt),d&&c!==null&&(c.f&J)===0&&(u.f^=J)}for(i=0;i<o;i++)if(a=n[i],He(a)&&mn(a),a.wv>e.wv)return!0}(!r||P!==null&&!_e)&&re(e,G)}return!1}function Tr(e,t){for(var n=t;n!==null;){if((n.f&tt)!==0)try{n.fn(e);return}catch{n.f^=tt}n=n.parent}throw Qe=!1,e}function Sr(e){return(e.f&ct)===0&&(e.parent===null||(e.parent.f&tt)===0)}function dt(e,t,n,r){if(Qe){if(n===null&&(Qe=!1),Sr(t))throw e;return}n!==null&&(Qe=!0);{Tr(e,t);return}}function An(e,t,n=!0){var r=e.reactions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];(a.f&ee)!==0?An(a,t,!1):t===a&&(n?re(a,fe):(a.f&G)!==0&&re(a,Le),_t(a))}}function Cn(e){var v;var t=j,n=W,r=le,i=I,a=_e,l=ne,d=q,o=$,u=e.f;j=null,W=0,le=null,_e=(u&J)!==0&&($||!$e||I===null),I=(u&(se|ze))===0?e:null,ne=null,zt(e.ctx),$=!1,ut++;try{var c=(0,e.fn)(),f=e.deps;if(j!==null){var s;if(ot(e,W),f!==null&&W>0)for(f.length=W+j.length,s=0;s<j.length;s++)f[W+s]=j[s];else e.deps=f=j;if(!_e)for(s=W;s<f.length;s++)((v=f[s]).reactions??(v.reactions=[])).push(e)}else f!==null&&W<f.length&&(ot(e,W),f.length=W);if(cn()&&le!==null&&!$&&f!==null&&(e.f&(ee|Le|fe))===0)for(s=0;s<le.length;s++)An(le[s],e);return i!==null&&ut++,c}finally{j=t,W=n,le=r,I=i,_e=a,ne=l,zt(d),$=o}}function Lr(e,t){let n=t.reactions;if(n!==null){var r=Kn.call(n,e);if(r!==-1){var i=n.length-1;i===0?n=t.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(t.f&ee)!==0&&(j===null||!j.includes(t))&&(re(t,Le),(t.f&(J|nt))===0&&(t.f^=nt),yn(t),ot(t,0))}function ot(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Lr(e,n[r])}function Bt(e){var t=e.f;if((t&ct)===0){re(e,G);var n=P,r=q,i=$e;P=e,$e=!0;try{(t&Nt)!==0?Ir(e):wn(e),bn(e);var a=Cn(e);e.teardown=typeof a=="function"?a:null,e.wv=Nn;var l=e.deps,d;Mt&&cr&&e.f&fe}catch(o){dt(o,e,n,r||e.ctx)}finally{$e=i,P=n}}}function Rr(){try{lr()}catch(e){if(lt!==null)dt(e,lt,null);else throw e}}function Pn(){try{for(var e=0;je.length>0;){e++>1e3&&Rr();var t=je,n=t.length;je=[];for(var r=0;r<n;r++){var i=t[r];(i.f&G)===0&&(i.f^=G);var a=Fr(i);Dr(a)}}}finally{at=!1,lt=null}}function Dr(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(ct|oe))===0)try{He(r)&&(Bt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?En(r):r.fn=null))}catch(i){dt(i,r,null,r.ctx)}}}function _t(e){at||(at=!0,queueMicrotask(Pn));for(var t=lt=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(ze|se))!==0){if((n&G)===0)return;t.f^=G}}je.push(t)}function Fr(e){for(var t=[],n=e.first;n!==null;){var r=n.f,i=(r&se)!==0,a=i&&(r&G)!==0;if(!a&&(r&oe)===0){if((r&an)!==0)t.push(n);else if(i)n.f^=G;else{var l=I;try{I=n,He(n)&&Bt(n)}catch(u){dt(u,n,null,n.ctx)}finally{I=l}}var d=n.first;if(d!==null){n=d;continue}}var o=n.parent;for(n=n.next;n===null&&o!==null;)n=o.next,o=o.parent}return t}function Br(e){var t;for(Yt();je.length>0;)at=!0,Pn(),Yt();return t}async function Vr(){await Promise.resolve(),Br()}function p(e){var t=e.f,n=(t&ee)!==0;if(I!==null&&!$){ne!==null&&ne.includes(e)&&sr();var r=I.deps;e.rv<ut&&(e.rv=ut,j===null&&r!==null&&r[W]===e?W++:j===null?j=[e]:(!_e||!j.includes(e))&&j.push(e))}else if(n&&e.deps===null&&e.effects===null){var i=e,a=i.parent;a!==null&&(a.f&J)===0&&(i.f^=J)}return n&&(i=e,He(i)&&mn(i)),e.v}function We(e){var t=$;try{return $=!0,e()}finally{$=t}}const jr=-7169;function re(e,t){e.f=e.f&jr|t}const Ur=["touchstart","touchmove"];function qr(e){return Ur.includes(e)}let Xt=!1;function Gr(){Xt||(Xt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Tn(e){var t=I,n=P;he(null),ye(null);try{return e()}finally{he(t),ye(n)}}function Mr(e,t,n,r=n){e.addEventListener(t,()=>Tn(n));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),Gr()}const Sn=new Set,Et=new Set;function zr(e,t,n,r={}){function i(a){if(r.capture||Fe.call(t,a),!a.cancelBubble)return Tn(()=>n==null?void 0:n.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Dt(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function B(e,t,n,r,i){var a={capture:r,passive:i},l=zr(e,t,n,a);(t===document.body||t===window||t===document)&&Or(()=>{t.removeEventListener(e,l,a)})}function ge(e){for(var t=0;t<e.length;t++)Sn.add(e[t]);for(var n of Et)n(e)}function Fe(e){var T;var t=this,n=t.ownerDocument,r=e.type,i=((T=e.composedPath)==null?void 0:T.call(e))||[],a=i[0]||e.target,l=0,d=e.__root;if(d){var o=i.indexOf(d);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var u=i.indexOf(t);if(u===-1)return;o<=u&&(l=o)}if(a=i[l]||e.target,a!==t){Xn(e,"currentTarget",{configurable:!0,get(){return a||n}});var c=I,f=P;he(null),ye(null);try{for(var s,v=[];a!==null;){var _=a.assignedSlot||a.parentNode||a.host||null;try{var y=a["__"+r];if(y!==void 0&&(!a.disabled||e.target===a))if(kt(y)){var[b,...x]=y;b.apply(a,[e,...x])}else y.call(a,e)}catch(A){s?v.push(A):s=A}if(e.cancelBubble||_===t||_===null)break;a=_}if(s){for(let A of v)queueMicrotask(()=>{throw A});throw s}}finally{e.__root=t,delete e.currentTarget,he(c),ye(f)}}}function Ln(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function st(e,t){var n=P;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function R(e,t){var n=(t&_r)!==0,r=(t&pr)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=Ln(a?e:"<!>"+e),n||(i=Te(i)));var l=r||_n?document.importNode(i,!0):i.cloneNode(!0);if(n){var d=Te(l),o=l.lastChild;st(d,o)}else st(l,l);return l}}function Hr(e,t,n="svg"){var r=!e.startsWith("<!>"),i=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var l=Ln(i),d=Te(l);a=Te(d)}var o=a.cloneNode(!0);return st(o,o),o}}function Wr(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Pt();return e.append(t,n),st(t,n),e}function S(e,t){e!==null&&e.before(t)}function Se(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Yr(e,t){return Kr(e,t)}const Pe=new Map;function Kr(e,{target:t,anchor:n,props:r={},events:i,context:a,intro:l=!0}){mr();var d=new Set,o=f=>{for(var s=0;s<f.length;s++){var v=f[s];if(!d.has(v)){d.add(v);var _=qr(v);t.addEventListener(v,Fe,{passive:_});var y=Pe.get(v);y===void 0?(document.addEventListener(v,Fe,{passive:_}),Pe.set(v,1)):Pe.set(v,y+1)}}};o(Ot(Sn)),Et.add(o);var u=void 0,c=Nr(()=>{var f=n??t.appendChild(Pt());return qe(()=>{if(a){Z({});var s=q;s.c=a}i&&(r.$$events=i),u=e(f,r)||{},a&&Q()}),()=>{var _;for(var s of d){t.removeEventListener(s,Fe);var v=Pe.get(s);--v===0?(document.removeEventListener(s,Fe),Pe.delete(s)):Pe.set(s,v)}Et.delete(o),f!==n&&((_=f.parentNode)==null||_.removeChild(f))}});return Xr.set(u,c),u}let Xr=new WeakMap;function V(e,t,[n,r]=[0,0]){var i=e,a=null,l=null,d=M,o=n>0?It:0,u=!1;const c=(s,v=!0)=>{u=!0,f(v,s)},f=(s,v)=>{d!==(d=s)&&(d?(a?it(a):v&&(a=qe(()=>v(i))),l&&rt(l,()=>{l=null})):(l?it(l):v&&(l=qe(()=>v(i,[n+1,r]))),a&&rt(a,()=>{a=null})))};Lt(()=>{u=!1,t(c),u||f(null,null)},o)}function ke(e,t){return t}function Jr(e,t,n,r){for(var i=[],a=t.length,l=0;l<a;l++)Rt(t[l].e,i,!0);var d=a>0&&i.length===0&&n!==null;if(d){var o=n.parentNode;gr(o),o.append(n),r.clear(),de(e,t[0].prev,t[a-1].next)}xn(i,()=>{for(var u=0;u<a;u++){var c=t[u];d||(r.delete(c.k),de(e,c.prev,c.next)),pe(c.e,!d)}})}function Oe(e,t,n,r,i,a=null){var l=e,d={flags:t,items:new Map,first:null},o=(t&sn)!==0;if(o){var u=e;l=u.appendChild(Pt())}var c=null,f=!1,s=br(()=>{var v=n();return kt(v)?v:v==null?[]:Ot(v)});Lt(()=>{var v=p(s),_=v.length;f&&_===0||(f=_===0,Zr(v,d,l,i,t,r,n),a!==null&&(_===0?c?it(c):c=qe(()=>a(l)):c!==null&&rt(c,()=>{c=null})),p(s))})}function Zr(e,t,n,r,i,a,l){var Ye,C,H,ae;var d=(i&vr)!==0,o=(i&(At|Ct))!==0,u=e.length,c=t.items,f=t.first,s=f,v,_=null,y,b=[],x=[],T,A,m,k;if(d)for(k=0;k<u;k+=1)T=e[k],A=a(T,k),m=c.get(A),m!==void 0&&((Ye=m.a)==null||Ye.measure(),(y??(y=new Set)).add(m));for(k=0;k<u;k+=1){if(T=e[k],A=a(T,k),m=c.get(A),m===void 0){var O=s?s.e.nodes_start:n;_=$r(O,t,_,_===null?t.first:_.next,T,A,k,r,i,l),c.set(A,_),b=[],x=[],s=_.next;continue}if(o&&Qr(m,T,k,i),(m.e.f&oe)!==0&&(it(m.e),d&&((C=m.a)==null||C.unfix(),(y??(y=new Set)).delete(m))),m!==s){if(v!==void 0&&v.has(m)){if(b.length<x.length){var w=x[0],g;_=w.prev;var ce=b[0],F=b[b.length-1];for(g=0;g<b.length;g+=1)Jt(b[g],w,n);for(g=0;g<x.length;g+=1)v.delete(x[g]);de(t,ce.prev,F.next),de(t,_,ce),de(t,F,w),s=w,_=F,k-=1,b=[],x=[]}else v.delete(m),Jt(m,s,n),de(t,m.prev,m.next),de(t,m,_===null?t.first:_.next),de(t,_,m),_=m;continue}for(b=[],x=[];s!==null&&s.k!==A;)(s.e.f&oe)===0&&(v??(v=new Set)).add(s),x.push(s),s=s.next;if(s===null)continue;m=s}b.push(m),_=m,s=m.next}if(s!==null||v!==void 0){for(var ie=v===void 0?[]:Ot(v);s!==null;)(s.e.f&oe)===0&&ie.push(s),s=s.next;var be=ie.length;if(be>0){var we=(i&sn)!==0&&u===0?n:null;if(d){for(k=0;k<be;k+=1)(H=ie[k].a)==null||H.measure();for(k=0;k<be;k+=1)(ae=ie[k].a)==null||ae.fix()}Jr(t,ie,we,c)}}d&&Dt(()=>{var Y;if(y!==void 0)for(m of y)(Y=m.a)==null||Y.apply()}),P.first=t.first&&t.first.e,P.last=_&&_.e}function Qr(e,t,n,r){(r&At)!==0&&bt(e.v,t),(r&Ct)!==0?bt(e.i,n):e.i=n}function $r(e,t,n,r,i,a,l,d,o,u){var c=(o&At)!==0,f=(o&dr)===0,s=c?f?vn(i):K(i):i,v=(o&Ct)===0?l:K(l),_={i:v,v:s,k:a,a:null,e:null,prev:n,next:r};try{return _.e=qe(()=>d(e,s,v,u),yr),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?t.first=_:(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Jt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==r;){var l=vt(a);i.before(a),a=l}}function de(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Rn(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Rn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ei(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Rn(e))&&(r&&(r+=" "),r+=t);return r}function Vt(e){return typeof e=="object"?ei(e):e??""}function ti(e,t,n){var r=e==null?"":""+e;return t&&(r=r?r+" "+t:t),r===""?null:r}function jt(e,t,n,r,i,a){var l=e.__className;if(l!==n){var d=ti(n,r);d==null?e.removeAttribute("class"):e.className=d,e.__className=n}return a}function ue(e,t,n,r){var i=e.__attributes??(e.__attributes={});i[t]!==(i[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[tr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&ni(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var Zt=new Map;function ni(e){var t=Zt.get(e.nodeName);if(t)return t;Zt.set(e.nodeName,t=[]);for(var n,r=e,i=Element.prototype;i!==r;){n=Jn(r);for(var a in n)n[a].set&&t.push(a);r=nn(r)}return t}function ri(e,t,n=t){Mr(e,"input",r=>{var i=r?e.defaultValue:e.value;if(i=mt(e)?gt(i):i,n(i),i!==(i=t())){var a=e.selectionStart,l=e.selectionEnd;e.value=i??"",l!==null&&(e.selectionStart=a,e.selectionEnd=Math.min(l,e.value.length))}}),We(t)==null&&e.value&&n(mt(e)?gt(e.value):e.value),gn(()=>{var r=t();mt(e)&&r===gt(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function mt(e){var t=e.type;return t==="number"||t==="range"}function gt(e){return e===""?null:+e}function Qt(e,t){return e===t||(e==null?void 0:e[Ze])===t}function Ae(e={},t,n,r){return St(()=>{var i,a;return gn(()=>{i=a,a=[],We(()=>{e!==n(...a)&&(t(e,...a),i&&Qt(n(...i),e)&&t(null,...i))})}),()=>{Dt(()=>{a&&Qt(n(...a),e)&&t(null,...a)})}}),e}function Ut(e,t,n,r){var i;i=e[t];var a=r,l=!0,d=!1,o=()=>(d=!0,l&&(l=!1,a=r),a),u;u=()=>{var v=e[t];return v===void 0?o():(l=!0,d=!1,v)};var c=!1,f=vn(i),s=te(()=>{var v=u(),_=p(f);return c?(c=!1,_):f.v=v});return function(v,_){if(arguments.length>0){const y=_?p(s):v;return s.equals(y)||(c=!0,U(f,y),d&&a!==void 0&&(a=y),We(()=>p(s))),v}return p(s)}}function qt(e){q===null&&fn(),me(()=>{const t=We(e);if(typeof t=="function")return t})}function ii(e){q===null&&fn(),qt(()=>()=>We(e))}const ai="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ai);var pt=class{static create(e,t,n){switch(n.type){case"f32":return new Xe(e,t,1,n.value,"f32");case"vec2f":return new Xe(e,t,2,n.value,"vec2f");case"vec3f":return new Xe(e,t,3,n.value,"vec3f");case"vec4f":return new Xe(e,t,4,n.value,"vec4f");case"i32":return new Je(e,t,1,n.value,"i32");case"vec2i":return new Je(e,t,2,n.value,"vec2i");case"vec3i":return new Je(e,t,3,n.value,"vec3i");case"vec4i":return new Je(e,t,4,n.value,"vec4i")}}set(e){const t=typeof e=="number"?[e]:e;if(this.size!==t.length)throw`Number of values [${t.length}] does not align with expected size [${this.size}].`;this.value=e,this.array.set(t)}constructor(e,t,n,r){this.scope=e,this.index=t,this.size=n,this.value=r,this.buffer=D.createBuffer({size:this.size*4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST})}generateImport(e){return`@group(${this.scope==="global"?0:1}) @binding(${this.index}) var<uniform> ${e}: ${this.type};
`}},Xe=class extends pt{constructor(e,t,n,r,i){super(e,t,n,r),this.type=i,this.array=new Float32Array(n),this.set(r)}},Je=class extends pt{constructor(e,t,n,r,i){super(e,t,n,r),this.array=new Int32Array(n),this.type=i,this.set(r)}},D,Dn,et,Fn,Bn,Me=[],Be={},$t=!1;async function li(e){if(D!=null&&D.destroy(),Me=[],Be={},!navigator.gpu)throw Error("WebGPU not supported.");const t=await navigator.gpu.requestAdapter();if(!t)throw Error("Couldn't request WebGPU adapter.");D=await t.requestDevice();const n={},r=[],i=[];Object.entries(e.uniforms).forEach((a,l)=>{const d=a[0],o=a[1];r[l]={binding:l,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}};const u=pt.create("global",l,o);i[l]={binding:l,resource:{buffer:u.buffer}},Be[d]=u,n[d]=u.value}),et=D.createBindGroupLayout({entries:r}),Fn=D.createPipelineLayout({bindGroupLayouts:[et]}),Bn=D.createBindGroup({layout:et,entries:i});for(const a in Be){const l=Be[a];D.queue.writeBuffer(l.buffer,0,l.array)}return new Proxy(n,{set:oi})}async function Ne(e){const t=e.uniforms,r=D.createShaderModule({code:`
        @vertex
        fn vertex_main(@location(0) pos : vec2f) ->  @builtin(position) vec4f {
            return vec4f(pos, 0., 1.); 
        }
    `+e.fragment}),i=e.canvas.getContext("webgpu");if(!i)throw"Failed to get WebGPU context";i.configure({device:D,format:navigator.gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"});const a=new Float32Array([-1,-1,1,-1,1,1,1,1,-1,1,-1,-1]),l=D.createBuffer({size:a.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});D.queue.writeBuffer(l,0,a,0,a.length);const d=[{attributes:[{shaderLocation:0,offset:0,format:"float32x2"}],arrayStride:8,stepMode:"vertex"}],o={};let u=Fn,c,f={};if(t){const T=[],A=[];Object.entries(e.uniforms).forEach((O,w)=>{const g=O[0],ce=O[1],F=pt.create("local",w,ce);T[w]={binding:F.index,visibility:GPUShaderStage.FRAGMENT,buffer:{type:"uniform"}},f[g]=F,A[w]={binding:F.index,resource:{buffer:F.buffer}},o[g]=F.value});const m=D.createBindGroupLayout({entries:T});u=D.createPipelineLayout({bindGroupLayouts:[et,m]}),c=D.createBindGroup({layout:m,entries:A})}const s={module:r,entryPoint:"vertex_main",buffers:d},v={module:r,entryPoint:"fragment_main",targets:[{format:navigator.gpu.getPreferredCanvasFormat()}]},_={vertex:s,fragment:v,primitive:{topology:"triangle-list"},layout:u},y=D.createRenderPipeline(_);let b=o,x;t?(x={ctx:i,renderPipeline:y,vertexBuffer:l,uniforms:f,customBindGroup:c},b=new Proxy(o,{set:si(x)})):x={ctx:i,renderPipeline:y,vertexBuffer:l,uniforms:{}};for(const T in x.uniforms){const A=x.uniforms[T];D.queue.writeBuffer(A.buffer,0,A.array)}return Me.push(x),{pass:x,data:b}}async function ui(e){Dn=e,$t||(requestAnimationFrame(Vn),$t=!0)}function Vn(){Me.forEach(e=>{const t=D.createCommandEncoder(),r={colorAttachments:[{clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store",view:e.ctx.getCurrentTexture().createView()}]},i=t.beginRenderPass(r);i.setPipeline(e.renderPipeline),i.setBindGroup(0,Bn),e.customBindGroup!=null&&i.setBindGroup(1,e.customBindGroup),i.setVertexBuffer(0,e.vertexBuffer),i.draw(6),i.end(),D.queue.submit([t.finish()])}),Dn(),requestAnimationFrame(Vn)}function oi(e,t,n){const r=Be[t];return r.set(n),D.queue.writeBuffer(r.buffer,0,r.array),e[t]=n,!0}function si(e){return function(t,n,r){const i=e.uniforms[n];return i.set(r),D.queue.writeBuffer(i.buffer,0,i.array),t[n]=r,!0}}function Ie(e){Me=Me.filter(t=>t!==e)}const fi="modulepreload",ci=function(e){return"/cocktail-composite/"+e},en={},xe=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(n.map(o=>{if(o=ci(o),o in en)return;en[o]=!0;const u=o.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":fi,u||(f.as="script"),f.crossOrigin="",f.href=o,d&&f.setAttribute("nonce",d),document.head.appendChild(f),u)return new Promise((s,v)=>{f.addEventListener("load",s),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${o}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};async function vi(){const e={},t=Object.assign({"../../configs/colorize.json":()=>xe(()=>import("./colorize-CHNcx-50.js"),[]),"../../configs/distance.json":()=>xe(()=>import("./distance-BUvEQlbX.js"),[]),"../../configs/example.json":()=>xe(()=>import("./example-gkkjt1vg.js"),[]),"../../configs/flatten.json":()=>xe(()=>import("./flatten-B3IWxpKq.js"),[]),"../../configs/grid.json":()=>xe(()=>import("./grid-DqWGsF0U.js"),[]),"../../configs/normalized_position.json":()=>xe(()=>import("./normalized_position-Ct8_-mTy.js"),[]),"../../configs/wave.json":()=>xe(()=>import("./wave-BtRUfTdT.js"),[])});for(const n in t){const r=JSON.parse(JSON.stringify(await t[n]())).default,i=di(r);i.valid?e[r.name]=r:console.error(`Invalid configuration in ${n}: ${i.error}`)}return e}function di(e){if(!e||typeof e!="object")return{valid:!1,error:"Config must be an object"};if(!e.name||typeof e.name!="string")return{valid:!1,error:'Missing or invalid "name" field'};if(!e.description||typeof e.description!="string")return{valid:!1,error:'Missing or invalid "description" field'};if(!e.inline||typeof e.inline!="string")return{valid:!1,error:'Missing or invalid "inline" field'};if(e.display_name!==void 0&&typeof e.display_name!="string")return{valid:!1,error:'Invalid "display_name" field'};if(e.locals!==void 0&&(!Array.isArray(e.locals)||!e.locals.every(t=>typeof t=="string")))return{valid:!1,error:'Invalid "locals" field: must be an array of strings'};if(e.globals!==void 0&&(!Array.isArray(e.globals)||!e.globals.every(t=>typeof t=="string")))return{valid:!1,error:'Invalid "globals" field: must be an array of strings'};if(e.function!==void 0&&typeof e.function!="string")return{valid:!1,error:'Invalid "function" field'};if(e.inputs!==void 0){if(typeof e.inputs!="object")return{valid:!1,error:'Invalid "inputs" field: must be an object'};for(const[t,n]of Object.entries(e.inputs)){const r=_i(n,t);if(!r.valid)return r}}if(!e.outputs||typeof e.outputs!="object")return{valid:!1,error:'Missing or invalid "outputs" field'};for(const[t,n]of Object.entries(e.outputs)){const r=mi(n,t);if(!r.valid)return r}return{valid:!0}}function _i(e,t){return!e||typeof e!="object"?{valid:!1,error:`Input "${t}" must be an object`}:!e.input_type||e.input_type!=="display"&&e.input_type!=="number"&&e.input_type!=="color"?{valid:!1,error:`Input "${t}" has invalid "input_type": must be "display", "number", or "color"`}:e.display_name!==void 0&&typeof e.display_name!="string"?{valid:!1,error:`Input "${t}" has invalid "display_name": must be a string`}:e.input_type==="display"?pi(e,t):e.input_type==="number"?hi(e,t):e.input_type==="color"?yi(e,t):{valid:!0}}function pi(e,t){return!e.data_type||!jn(e.data_type)?{valid:!1,error:`Display input "${t}" has invalid "data_type": must be one of f32, vec2f, vec3f, vec4f`}:e.default===void 0||typeof e.default!="string"?{valid:!1,error:`Display input "${t}" must have a string "default" value`}:{valid:!0}}function hi(e,t){return!e.data_type||e.data_type!=="float"?{valid:!1,error:`Number input "${t}" has invalid "data_type": must be "float"`}:e.default===void 0?{valid:!1,error:`Number input "${t}" must have a "default" value`}:typeof e.default!="number"&&(!Array.isArray(e.default)||!e.default.every(n=>typeof n=="number"))?{valid:!1,error:`Number input "${t}" has invalid "default": must be a number or array of numbers`}:{valid:!0}}function yi(e,t){return!e.data_type||e.data_type!=="float"?{valid:!1,error:`Color input "${t}" has invalid "data_type": must be "float"`}:e.default===void 0||typeof e.default!="string"?{valid:!1,error:`Color input "${t}" must have a string "default" value`}:{valid:!0}}function mi(e,t){return!e||typeof e!="object"?{valid:!1,error:`Output "${t}" must be an object`}:!e.data_type||!jn(e.data_type)?{valid:!1,error:`Output "${t}" has invalid "data_type": must be one of f32, vec2f, vec3f, vec4f`}:e.display_name!==void 0&&typeof e.display_name!="string"?{valid:!1,error:`Output "${t}" has invalid "display_name": must be a string`}:{valid:!0}}function jn(e){return["f32","vec2f","vec3f","vec4f"].includes(e)}const E=X({root:null,configs:{}});let Un=0;function Gt(e,t){const n={};if(t.inputs!==void 0)for(const i in t.inputs){const a=t.inputs[i],l=a.display_name?a.display_name:i;if(a.input_type==="display"){const d={data_type:a.data_type,input_type:"display",value:a.default,display_name:l};n[i]=d}else if(a.input_type==="number"){const d=Array.isArray(a.default)?[...a.default]:a.default,o={data_type:a.data_type,input_type:"number",value:d,display_name:l};n[i]=o}else if(a.input_type==="color"){const d={data_type:a.data_type,input_type:"color",value:yt(a.default),display_name:l};n[i]=d}}const r={};for(const i in t.outputs){const a=t.outputs[i],l=a.display_name?a.display_name:i;r[i]={data_type:a.data_type,text:`${i}_${e}`,display_name:l}}return{id:e,name:t.name,display_name:t.display_name??t.name,inputs:n,outputs:r,children:[]}}function Ce(e){switch(e.data_type){case"f32":return`vec4f(vec3f(${e.text}), 1.)`;case"vec2f":return`vec4f(${e.text}, 0., 1.)`;case"vec3f":return`vec4f(${e.text}, 1.)`;case"vec4f":return e.text}}function gi(e){if(typeof e.value!="string")return Ce(e.value);switch(e.data_type){case"f32":return`vec4f(vec3f(${e.value}), 1.)`;case"vec2f":return`vec4f(${e.value}, 0., 1.)`;case"vec3f":return`vec4f(${e.value}, 1.)`;case"vec4f":return e.value}}function ht(e,t){for(const n of t.children){if(n.id===e.id)return t;const r=ht(e,n);if(r)return r}return null}function bi(e,t){if(!E.root)throw new Error("Tree root is null");const n=Gt(Un++,t);if(E.root.id===e.id)return n.children.push(e),E.root=n,E.root;{const r=ht(e,E.root);if(!r)throw new Error("Parent node not found");return r.children.filter(i=>i.id!==e.id),n.children.push(e),r.children=[...r.children,n],r.children[r.children.length-1]}}function tn(e,t){const n=Gt(Un++,t);return e?(e.children=[...e.children,n],e.children[e.children.length-1]):(E.root=n,E.root)}function wi(e){if(!E.root)return null;if(E.root&&e.id===E.root.id)return e.children.length==0?(E.root=null,null):e.children.length==1?(E.root=e.children[0],E.root):e;const t=ht(e,E.root);if(!t)return e;const n=[];for(const r in e.outputs)n.push(e.outputs[r].text);for(const r in t.inputs){const i=t.inputs[r];if(typeof i.value=="object"&&"text"in i.value&&n.includes(i.value.text)){const l=E.configs[t.name].inputs[r];l.input_type==="color"?i.value=yt(l.default):i.value=l.default}}return t.children=t.children.filter(r=>r.id!==e.id),t.children=[...t.children,...e.children],t}function yt(e){const t=e.startsWith("#")?e.substring(1):e;if(!/^[0-9A-Fa-f]{6}$/.test(t))throw new Error(`Invalid hex color format: ${e}. Expected format: #RRGGBB`);const r=parseInt(t.substring(0,2),16)/255,i=parseInt(t.substring(2,4),16)/255,a=parseInt(t.substring(4,6),16)/255;return[r,i,a,1]}const qn={res:"vec2f"},Gn={frame:"f32"};function De(e,t,n){if(e===null)return;const r=xt(e,"locals",n),i=xt(e,"globals",n);let a="";r.forEach((l,d)=>{const o=qn[l];o===void 0&&console.error(`Unknown local uniform ${l}`),a+=`@group(1) @binding(${d}) var<uniform> ${l}: ${o};
`}),i.forEach((l,d)=>{const o=Gn[l];o===void 0&&console.error(`Unknown global uniform ${l}`),a+=`@group(0) @binding(${d}) var<uniform> ${l}: ${o};
`});for(const l in n)n[l].function!==void 0&&(a+=n[l].function+`
`);return a+=`@fragment
fn fragment_main(@builtin(position) pos: vec4f) -> @location(0) vec4f {
`,a+=Mn(e,n),a+=`return ${t};
}
`,a}function xt(e,t,n,r){const i=r===void 0?[]:r;for(const l of e.children)xt(l,t,n,i);const a=n[e.name];if(a[t]!==void 0)for(const l of a[t])i.includes(l)||i.push(l);return i}function Mn(e,t){let n="";for(const i of e.children)n+=Mn(i,t);const r=t[e.name];if(r.inline!=null){let i=r.inline;i=Ei(i,e,r),i=xi(i,"$id{}",e.id.toString()),n+=i+`
`}return n}function Ei(e,t,n){let r=e;if(n.inputs!==void 0)for(const i in n.inputs){const a=t.inputs[i],l="$i{"+i+"}";for(;r.includes(l);)r=r.replace("$i{"+i+"}",ki(a))}for(const i in n.outputs){const a=t.outputs[i],l="$o{"+i+"}";for(;r.includes(l);)r=r.replace(l,a.text)}return r}function xi(e,t,n){if(n===void 0)return e;let r=e;for(;r.includes(t);)r=r.replace(t,n);return r}function ki(e){if(typeof e.value=="string")return e.value;if(typeof e.value=="number")return e.value.toString();if(Array.isArray(e.value)){if(e.data_type==="float")return`vec${e.value.length}f(${e.value.join(", ")})`;throw new Error("Invalid input data type")}if("text"in e.value)return e.value.text;throw new Error("Invalid input value")}function Oi(e){const t=["res"],n=["frame"];let r="";return t.forEach((i,a)=>{const l=qn[i];l===void 0&&console.error(`Unknown local uniform ${i}`),r+=`@group(1) @binding(${a}) var<uniform> ${i}: ${l};
`}),n.forEach((i,a)=>{const l=Gn[i];l===void 0&&console.error(`Unknown global uniform ${i}`),r+=`@group(0) @binding(${a}) var<uniform> ${i}: ${l};
`}),r+=`@fragment
fn fragment_main(@builtin(position) pos: vec4f) -> @location(0) vec4f {
`,r+=`return ${e};
}
`,r}const h=X({focusedNode:null,selectedEffect:null,selectedInput:null,selectedOutput:null,linkedConnectors:[]});function zn(e,t){return!!(e.data_type===t.data_type||typeof e.value=="number"&&e.data_type==="float"&&t.data_type==="f32"||Array.isArray(e.value)&&(e.data_type==="float"&&e.value.length==2&&t.data_type==="vec2f"||e.data_type==="float"&&e.value.length==3&&t.data_type==="vec3f"||e.data_type==="float"&&e.value.length==4&&t.data_type==="vec4f")||typeof e.value=="object"&&"text"in e.value&&e.value.data_type===t.data_type)}function Hn(e,t){if(e===t)return!1;for(const n of e.children)if(n.id===t.id)return!0;return!1}var Ni=R('<button draggable="true"><h2 class="svelte-1ypqg0h"> </h2> <div class="svelte-1ypqg0h"><p class="svelte-1ypqg0h"> </p> <canvas class="svelte-1ypqg0h"></canvas></div></button>');function Ii(e,t){Z(t,!0);let n,r;qt(async()=>{n.width=100,n.height=100;const f=Gt(0,t.config),s=Ce(f.outputs[Object.keys(f.outputs)[0]]),v=De(f,s,E.configs);if(!v)return;r=(await Ne({canvas:n,uniforms:{res:{type:"vec2f",value:[100,100]}},fragment:v})).pass}),ii(()=>{Ie(r)});var i=Ni();i.__click=()=>{h.selectedEffect=t.config};var a=N(i),l=N(a),d=L(a,2),o=N(d),u=N(o),c=L(o,2);Ae(c,f=>n=f,()=>n),z(()=>{jt(i,1,Vt({selected:h.selectedEffect===t.config}),"svelte-1ypqg0h"),Se(l,t.config.display_name??t.config.name),Se(u,t.config.description)}),S(e,i),Q()}ge(["click"]);var Ai=R("<button></button>");function Wn(e,t){Z(t,!0);const n=Ut(t,"input");let r;const i=te(()=>{var c;return((c=h.selectedInput)==null?void 0:c.input)===n()}),a=te(()=>h.selectedOutput&&zn(n(),h.selectedOutput.output)&&Hn(t.node,h.selectedOutput.node));function l(c){c.stopPropagation(),h.selectedOutput?(n().value=h.selectedOutput.output,h.selectedOutput=null,h.selectedInput=null):h.selectedInput={input:n(),node:t.node}}me(()=>{if(typeof n().value=="object"&&"text"in n().value)return d(),o});async function d(){if(typeof n().value!="object"||!("text"in n().value))return;await Vr();const c=document.querySelector(`[data-connector="${n().value.text}"]`);if(c){const f=()=>{o(),n().input_type==="color"&&t.config.input_type==="color"?n().value=yt(t.config.default):n().value=t.config.default};h.linkedConnectors=[...h.linkedConnectors,{c1:r,c2:c,unlink:f}]}}function o(){h.linkedConnectors=h.linkedConnectors.filter(({c1:c})=>c!==r)}var u=Ai();u.__click=l,Ae(u,c=>r=c,()=>r),z(()=>{ue(u,"aria-label",`${n().display_name} input connector`),jt(u,1,Vt({selected:p(i),compatible:p(a)}),"svelte-1tx0n9f"),u.disabled=h.selectedOutput&&!p(a)}),S(e,u),Q()}ge(["click"]);var Ci=R('<div class="node svelte-14ldse1" role="button" tabindex="0"><h2 class="svelte-14ldse1"> </h2> <canvas class="svelte-14ldse1"></canvas> <div class="node-connectors svelte-14ldse1"></div></div>');function Pi(e,t){Z(t,!0);let n;me(()=>{n.width=100,n.height=100;const o=Ce(t.node.outputs[Object.keys(t.node.outputs)[0]]),u=De(t.node,o,E.configs);if(!u)return;let c;return Ne({canvas:n,uniforms:{res:{type:"vec2f",value:[100,100]}},fragment:u}).then(f=>{c=f.pass}),()=>{Ie(c)}});var r=Ci();r.__click=()=>{h.focusedNode=t.node};var i=N(r),a=N(i),l=L(i,2);Ae(l,o=>n=o,()=>n);var d=L(l,2);Oe(d,21,()=>Object.keys(t.node.inputs),ke,(o,u)=>{Wn(o,{get node(){return t.node},get input(){return t.node.inputs[p(u)]},get config(){return E.configs[t.node.name].inputs[p(u)]}})}),z(()=>Se(a,t.node.display_name)),B("keypress",r,o=>{o.key==="Enter"&&(h.focusedNode=t.node)}),S(e,r),Q()}ge(["click"]);var Ti=R("<button></button>");function Yn(e,t){Z(t,!0);const n=te(()=>{var l;return((l=h.selectedOutput)==null?void 0:l.output)===t.output}),r=te(()=>h.selectedInput&&zn(h.selectedInput.input,t.output)&&Hn(t.node,h.selectedInput.node));function i(l){l.stopPropagation(),h.selectedInput?(h.selectedInput.input.value=t.output,h.selectedInput=null,h.selectedOutput=null):h.selectedOutput={output:t.output,node:t.node}}var a=Ti();a.__click=i,z(()=>{ue(a,"aria-label",`${t.output.display_name} output connector`),jt(a,1,Vt({selected:p(n),compatible:p(r)}),"svelte-1tx0n9f"),ue(a,"data-connector",t.output.text),a.disabled=h.selectedInput&&!p(r)}),S(e,a),Q()}ge(["click"]);var Si=R('<input aria-label="x" placeholder="x" type="number" class="svelte-fv5b1w">'),Li=R('<input aria-label="x" placeholder="x" type="number" class="svelte-fv5b1w">'),Ri=R('<input aria-label="y" placeholder="y" type="number" class="svelte-fv5b1w">'),Di=R('<input aria-label="z" placeholder="z" type="number" class="svelte-fv5b1w">'),Fi=R('<input aria-label="w" placeholder="w" type="number" class="svelte-fv5b1w">'),Bi=R("<!> <!> <!> <!>",1),Vi=R('<div class="svelte-fv5b1w"><!></div>');function ji(e,t){Z(t,!0);const n=Ut(t,"input");function r(u){const c=parseFloat(u.value);isNaN(c)?u.value=n().value.toString():n().value=c}function i(u,c){if(!Array.isArray(n().value))throw new Error("Input value is not an array");if(c<0||c>=n().value.length)throw new Error("Index out of bounds");const f=parseFloat(u.value);isNaN(f)?u.value=n().value[c].toString():n().value[c]=f}var a=Vi(),l=N(a);{var d=u=>{var c=Si();z(()=>c.defaultValue=n().value),B("keypress",c,f=>{f.key==="Enter"&&f.currentTarget.blur()}),B("blur",c,f=>r(f.currentTarget)),S(u,c)},o=(u,c)=>{{var f=s=>{var v=Bi(),_=Tt(v);{var y=O=>{var w=Li();z(()=>w.defaultValue=n().value[0]),B("keypress",w,g=>{g.key==="Enter"&&g.currentTarget.blur()}),B("blur",w,g=>i(g.currentTarget,0)),S(O,w)};V(_,O=>{n().value.length>=1&&O(y)})}var b=L(_,2);{var x=O=>{var w=Ri();z(()=>w.defaultValue=n().value[1]),B("keypress",w,g=>{g.key==="Enter"&&g.currentTarget.blur()}),B("blur",w,g=>i(g.currentTarget,1)),S(O,w)};V(b,O=>{n().value.length>=2&&O(x)})}var T=L(b,2);{var A=O=>{var w=Di();z(()=>w.defaultValue=n().value[2]),B("keypress",w,g=>{g.key==="Enter"&&g.currentTarget.blur()}),B("blur",w,g=>i(g.currentTarget,2)),S(O,w)};V(T,O=>{n().value.length>=3&&O(A)})}var m=L(T,2);{var k=O=>{var w=Fi();z(()=>w.defaultValue=n().value[3]),B("keypress",w,g=>{g.key==="Enter"&&g.currentTarget.blur()}),B("blur",w,g=>i(g.currentTarget,3)),S(O,w)};V(m,O=>{n().value.length>=4&&O(k)})}S(s,v)};V(u,s=>{Array.isArray(n().value)&&s(f)},c)}};V(l,u=>{typeof n().value=="number"?u(d):u(o,!1)})}S(e,a),Q()}var Ui=R("<canvas></canvas>");function qi(e,t){Z(t,!0);let n;me(()=>{if(n.width=30,n.height=30,typeof t.input.value=="string"){const i=gi(t.input),a=Oi(i);let l;return Ne({canvas:n,uniforms:{res:{type:"vec2f",value:[30,30]}},fragment:a}).then(d=>{l=d.pass}),()=>{Ie(l)}}else{let i=null;for(const o of t.node.children)for(const u of Object.values(o.outputs))if(u.text===t.input.value.text){i=o;break}if(!i)return;const a=Ce(t.input.value),l=De(i,a,E.configs);if(!l)return;let d;return Ne({canvas:n,uniforms:{res:{type:"vec2f",value:[30,30]}},fragment:l}).then(o=>{d=o.pass}),()=>{Ie(d)}}});var r=Ui();Ae(r,i=>n=i,()=>n),S(e,r),Q()}var Gi=R('<div class="svelte-8apo56"><input type="color" class="svelte-8apo56"> <input type="number" min="0" max="1" step="0.05" placeholder="alpha" class="svelte-8apo56"></div>');function Mi(e,t){Z(t,!0);const n=Ut(t,"input");let r=Ue(X(t.config.default));function i(u){if("text"in n().value)return;const c=u.target,f=yt(c.value);n().value=[...f.slice(0,3),n().value[3]]}function a(u){if("text"in n().value)return;const c=u.target,f=parseFloat(c.value);isNaN(f)||(n().value[3]=f)}var l=Wr(),d=Tt(l);{var o=u=>{var c=Gi(),f=N(c),s=L(f,2);z(()=>{ue(f,"aria-label",`${n().display_name} color input`),f.defaultValue=t.config.default,ue(s,"aria-label",`${n().display_name} alpha input`),s.defaultValue=n().value[3]}),B("blur",f,i),B("keypress",f,v=>{v.key==="Enter"&&v.currentTarget.blur()}),ri(f,()=>p(r),v=>U(r,v)),B("blur",s,a),B("keypress",s,v=>{v.key==="Enter"&&v.currentTarget.blur()}),S(u,c)};V(d,u=>{"text"in n().value||u(o)})}S(e,l),Q()}var zi=R('<div class="input svelte-1s7988x"><h2> </h2> <!> <div class="input-connector svelte-1s7988x"><!></div></div>'),Hi=R('<div class="node svelte-1s7988x"><div class="node-connectors svelte-1s7988x"></div> <div class="node-header svelte-1s7988x"><button aria-label="remove node" class="remove-node-button svelte-1s7988x">X</button> <h2> </h2></div> <canvas class="svelte-1s7988x"></canvas> <div class="node-parameters svelte-1s7988x"></div></div>');function Wi(e,t){Z(t,!0);const n=te(()=>E.configs[t.node.name]);let r;me(()=>{r.width=175,r.height=175;const s=Ce(t.node.outputs[Object.keys(t.node.outputs)[0]]),v=De(t.node,s,E.configs);if(!v)return;let _;return Ne({canvas:r,uniforms:{res:{type:"vec2f",value:[175,175]}},fragment:v}).then(y=>{_=y.pass}),()=>{Ie(_)}});var i=Hi(),a=N(i);Oe(a,21,()=>Object.values(t.node.outputs),ke,(s,v)=>{Yn(s,{get output(){return p(v)},get node(){return t.node}})});var l=L(a,2),d=N(l);d.__click=()=>{h.focusedNode=wi(t.node)};var o=L(d,2),u=N(o),c=L(l,2);Ae(c,s=>r=s,()=>r);var f=L(c,2);Oe(f,21,()=>Object.keys(t.node.inputs),ke,(s,v)=>{var _=zi(),y=N(_),b=N(y),x=L(y,2);{var T=O=>{ji(O,{get input(){return t.node.inputs[p(v)]},get config(){return p(n).inputs[p(v)]}})},A=(O,w)=>{{var g=F=>{qi(F,{get input(){return t.node.inputs[p(v)]},get node(){return t.node}})},ce=(F,ie)=>{{var be=we=>{Mi(we,{get input(){return t.node.inputs[p(v)]},get config(){return p(n).inputs[p(v)]}})};V(F,we=>{t.node.inputs[p(v)].input_type==="color"&&we(be)},ie)}};V(O,F=>{t.node.inputs[p(v)].input_type==="display"?F(g):F(ce,!1)},w)}};V(x,O=>{t.node.inputs[p(v)].input_type==="number"?O(T):O(A,!1)})}var m=L(x,2),k=N(m);Wn(k,{get input(){return t.node.inputs[p(v)]},get node(){return t.node},get config(){return p(n).inputs[p(v)]}}),z(()=>Se(b,t.node.inputs[p(v)].display_name)),S(s,_)}),z(()=>Se(u,t.node.display_name)),S(e,i),Q()}ge(["click"]);var Yi=R('<div class="node svelte-1baya7e" role="button" tabindex="0"><div class="node-connectors svelte-1baya7e"></div> <h2> </h2> <canvas class="svelte-1baya7e"></canvas></div>');function Ki(e,t){Z(t,!0);let n;me(()=>{n.width=100,n.height=100;const o=Ce(t.node.outputs[Object.keys(t.node.outputs)[0]]),u=De(t.node,o,E.configs);if(!u)return;let c;return Ne({canvas:n,uniforms:{res:{type:"vec2f",value:[100,100]}},fragment:u}).then(f=>{c=f.pass}),()=>{Ie(c)}});var r=Yi();r.__click=()=>{h.focusedNode=t.node};var i=N(r);Oe(i,21,()=>Object.values(t.node.outputs),ke,(o,u)=>{Yn(o,{get output(){return p(u)},get node(){return t.node}})});var a=L(i,2),l=N(a),d=L(a,2);Ae(d,o=>n=o,()=>n),z(()=>Se(l,t.node.display_name)),B("keypress",r,o=>{o.key==="Enter"&&(h.focusedNode=t.node)}),S(e,r),Q()}ge(["click"]);var Xi=Hr('<svg class="svelte-1v8mibb"><line role="button" tabindex="0" stroke="var(--accent-color)" stroke-width="4" class="svelte-1v8mibb"></line></svg>');function Ji(e,t){Z(t,!0);let n=Ue(X(t.linkedConnectors.c1.getBoundingClientRect())),r=Ue(X(t.linkedConnectors.c2.getBoundingClientRect()));const i=te(()=>({x:p(n).x+p(n).width/2,y:p(n).y+p(n).height/2})),a=te(()=>({x:p(r).x+p(r).width/2,y:p(r).y+p(r).height/2}));me(()=>(h.selectedEffect,l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}));function l(){U(n,X(t.linkedConnectors.c1.getBoundingClientRect())),U(r,X(t.linkedConnectors.c2.getBoundingClientRect()))}var d=Xi(),o=N(d);o.__click=function(...u){var c;(c=t.linkedConnectors.unlink)==null||c.apply(this,u)},z(()=>{ue(o,"x1",p(i).x),ue(o,"y1",p(i).y),ue(o,"x2",p(a).x),ue(o,"y2",p(a).y)}),B("keypress",o,u=>u.key==="Enter"&&t.linkedConnectors.unlink()),S(e,d),Q()}ge(["click"]);var Zi=(e,t)=>U(t,"visualizer"),Qi=R('<button class="placeholder-node svelte-zi7em1">+</button>'),$i=R('<button class="placeholder-node svelte-zi7em1">+</button>'),ea=R('<button class="placeholder-node svelte-zi7em1">+</button>'),ta=R("<!> <!>",1),na=R('<div id="editor" class="svelte-zi7em1"><section id="node-view" class="svelte-zi7em1"><nav class="svelte-zi7em1"><button>visualize</button> <h1 id="title" class="svelte-zi7em1">COCKTAIL COMPOSITE</h1></nav> <div id="nodes" role="button" tabindex="-1" class="svelte-zi7em1"><div id="parent-node"><!></div> <div id="focus-node" class="svelte-zi7em1"><!></div> <div id="child-nodes" class="svelte-zi7em1"><!></div></div> <div id="linked-connectors"></div></section> <section id="effect-view" class="svelte-zi7em1"><h1>effect toolkit</h1> <div id="effects" class="svelte-zi7em1"></div></section></div>'),ra=(e,t)=>U(t,"editor"),ia=R('<div id="visualizer" class="svelte-zi7em1"><div id="visualizer-interface"><button class="svelte-zi7em1">edit</button></div> <canvas id="visualizer-canvas" class="svelte-zi7em1"></canvas></div>'),aa=R('<main class="svelte-zi7em1"><!></main>');function la(e,t){Z(t,!0);let n=Ue("editor"),r=Ue(null);const i=te(()=>h.focusedNode===null||E.root===null?null:ht(h.focusedNode,E.root));function a(){const f=tn(null,h.selectedEffect);h.focusedNode=f}qt(async()=>{const f=await li({uniforms:{frame:{type:"f32",value:0}}}),s=await vi();E.configs=s,ui(()=>{f.frame++})}),me(()=>{if(E.root!==null&&p(r)!==null){p(r).width=window.innerWidth,p(r).height=window.innerHeight;const f=Ce(E.root.outputs[Object.keys(E.root.outputs)[0]]),s=De(E.root,f,E.configs);if(!s)return;let v;return Ne({canvas:p(r),uniforms:{res:{type:"vec2f",value:[window.innerWidth,window.innerHeight]}},fragment:s}).then(_=>{v=_.pass}),()=>{Ie(v)}}});function l(){h.selectedEffect=null,h.selectedInput=null,h.selectedOutput=null}var d=aa(),o=N(d);{var u=f=>{var s=na(),v=N(s),_=N(v),y=N(_);y.__click=[Zi,n];var b=L(_,2);b.__click=l,b.__keyup=C=>{C.key==="Enter"&&(h.selectedEffect=null)};var x=N(b),T=N(x);{var A=C=>{Pi(C,{get node(){return p(i)}})},m=(C,H)=>{{var ae=Y=>{var Ee=Qi();Ee.__click=()=>bi(h.focusedNode,h.selectedEffect),S(Y,Ee)};V(C,Y=>{h.selectedEffect!==null&&h.focusedNode!==null&&Y(ae)},H)}};V(T,C=>{p(i)!==null?C(A):C(m,!1)})}var k=L(x,2),O=N(k);{var w=C=>{Wi(C,{get node(){return h.focusedNode}})},g=(C,H)=>{{var ae=Y=>{var Ee=$i();Ee.__click=a,S(Y,Ee)};V(C,Y=>{h.selectedEffect!==null&&Y(ae)},H)}};V(O,C=>{h.focusedNode!==null?C(w):C(g,!1)})}var ce=L(k,2),F=N(ce);{var ie=C=>{var H=ta(),ae=Tt(H);Oe(ae,17,()=>{var ve;return(ve=h.focusedNode)==null?void 0:ve.children},ke,(ve,Ke)=>{Ki(ve,{get node(){return p(Ke)}})});var Y=L(ae,2);{var Ee=ve=>{var Ke=ea();Ke.__click=()=>tn(h.focusedNode,h.selectedEffect),S(ve,Ke)};V(Y,ve=>{h.selectedEffect!==null&&ve(Ee)})}S(C,H)};V(F,C=>{h.focusedNode!==null&&C(ie)})}var be=L(b,2);Oe(be,21,()=>h.linkedConnectors,ke,(C,H)=>{Ji(C,{get linkedConnectors(){return p(H)}})});var we=L(v,2),Ye=L(N(we),2);Oe(Ye,21,()=>Object.values(E.configs),ke,(C,H)=>{Ii(C,{get config(){return p(H)}})}),S(f,s)},c=f=>{var s=ia(),v=N(s),_=N(v);_.__click=[ra,n];var y=L(v,2);Ae(y,b=>U(r,b),()=>p(r)),S(f,s)};V(o,f=>{p(n)==="editor"?f(u):f(c,!1)})}S(e,d),Q()}ge(["click","keyup"]);Yr(la,{target:document.getElementById("app")});
